<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Travel">
	
	<resultMap id="TravelResultSet" type="Travel">
		<id property="trvId" column="TRV_ID"/>
		<result property="trvTitle" column="TRV_TITLE" />
		<result property="startDate" column="START_DATE" />
		<result property="endDate" column="END_DATE" />
		<result property="compNumber" column="COMP_NUMBER" />
		<result property="openDate" column="OPEN_DATE" />
		<result property="modifyDate" column="MODIFY_DATE" />
		<result property="completeDate" column="COMPLETE_DATE" />
		<result property="status" column="STATUS" />
		<result property="memberId" column="MEMBER_ID" />
		<result property="trvRef" column="TRV_REF" />
	</resultMap>
	
	<resultMap id="CityResultSet" type="City">
		<id property="cityId" column="CITY_ID" />
		<result property="cityNameKo" column="CITY_NAME_KO" />
		<result property="cityContent" column="CITY_CONTENT" />
		<result property="countryId" column="COUNTRY_ID" />
		<result property="cityNameEn" column="CITY_NAME_EN" />
	</resultMap>
	
	<insert id="insertTravel" parameterType="Travel">
		INSERT INTO TRAVEL
		VALUES(TRAVEL_SEQ.NEXTVAL, #{trvTitle}, #{startDate}, #{endDate}, #{compNumber}, SYSDATE, SYSDATE, NULL, 'Y', 1, NULL)
	</insert>
	<select id="selectTrvId" resultType="_int">
		SELECT TRAVEL_SEQ.CURRVAL FROM DUAL
	</select>
	<select id="selectCity" parameterType="java.lang.String" resultMap="CityResultSet">
		SELECT *
		FROM CITY
		WHERE CITY_NAME_KO = #{cityName}
	</select>
	<insert id="insertTrvCity" parameterType="TrvCity">
		INSERT INTO TRV_CITY
		VALUES(#{cityId}, #{trvId})
	</insert>
	<insert id="insertTrvDay" parameterType="TrvDay">
		INSERT INTO TRV_DAY
		VALUES(TRV_DAY_SEQ.NEXTVAL, #{dayNumber}, #{dayDate}, NULL, 'N', #{trvId})
	</insert>
	

</mapper>